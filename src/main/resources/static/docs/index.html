<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="description" content="소리기록실 API 문서입니다.">
<meta name="author" content="Sangyeop. Nam">
<title>소리기록실(AAR) API 문서</title>
<style>

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>소리기록실(AAR) API 문서</h1>
<div class="details">
<span id="author" class="author">Sangyeop. Nam</span><br>
<span id="email" class="email"><a href="mailto:spearoad15@gmail.com">spearoad15@gmail.com</a></span><br>
<span id="revnumber">version 0.0.1-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#authn-api">인증(Authentication) API</a>
<ul class="sectlevel2">
<li><a href="#authn-flow">인증 플로우</a></li>
<li><a href="#authn-login-api">SNS 로그인 API</a></li>
<li><a href="#authn-regist-api">회원가입 API</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>소리기록실 API 문서입니다</p>
</div>
<div class="paragraph">
<p>Audio Archive Room API Docs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authn-api">인증(Authentication) API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>인증과 관련된 API 문서입니다.</p>
</div>
<div class="sect2">
<h3 id="authn-flow">인증 플로우</h3>
<div class="imageblock">
<div class="content">
<img src="login.png" alt="login flow">
</div>
<div class="title">Figure 1. 로그인 플로우차트</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><strong>User 로그인</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p><code>사용자</code>가 소리기록실 페이지로 접속해서 로그인을 시도합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>에서 <code>백엔드</code>로 특정 서드파티 도메인의 로그인 API 요청을 전송합니다.</p>
</li>
<li>
<p>이를 받은 <code>백엔드</code>는 브라우저를 <code>서드파티</code>의 로그인 페이지로 이동시킵니다.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code><strong>SNS 로그인 시도</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p><code>사용자</code>가 서드파티 페이지에서 로그인을 시도합니다.</p>
</li>
<li>
<p>정상 로그인일 경우, <code>서드파티</code>에서 백엔드로 코드를 전송합니다.</p>
</li>
<li>
<p>해당 코드를 수신한 <code>백엔드</code>는 토큰을 교환하여 사용자 정보를 받습니다.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code><strong>SNS 로그인 완료</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p><code>백엔드</code>에서 받은 사용자 정보를 확인하여 <code>프론트엔드</code>로 전송합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>에서는 해당 사용자 정보를 포함하여 메인 페이지를 전송합니다.</p>
</li>
<li>
<p><code>사용자</code>는 메인 페이지로 이동합니다.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="regist.png" alt="regist flow">
</div>
<div class="title">Figure 2. 회원가입 플로우차트</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code><strong>User 로그인</strong></code></p>
<div class="ulist">
<ul>
<li>
<p>사용자가 로그인을 시도합니다.(로그인 플로우와 동일)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code><strong>SNS 계정 등록</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p><code>백엔드</code>에서 해당 SNS 계정이 등록되어 있지 않으면 해당 계정을 <strong>임시 저장</strong>합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>에게 임시 저장된 계정 정보와 함께 <strong>임시 토큰</strong>을 전송합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>는 해당 정보를 임시 저장하고, 회원가입 페이지를 전송합니다.</p>
</li>
</ol>
</div>
</li>
<li>
<p><code><strong>회원가입</strong></code></p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p><code>사용자</code>는 회원가입 페이지에서 필요한 양식을 채워 회원가입을 시도합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>는 해당 정보를 <code>백엔드</code>로 전송합니다.</p>
</li>
<li>
<p><code>백엔드</code>는 해당 정보를 등록하고, 사용자 정보와 함께 <strong>토큰</strong>을 전송합니다.</p>
</li>
<li>
<p><code>프론트엔드</code>는 해당 사용자 정보를 포함하여 메인 페이지를 전송합니다.</p>
</li>
<li>
<p><code>사용자</code>는 메인 페이지로 이동합니다.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="authn-login-api">SNS 로그인 API</h3>
<div class="paragraph">
<p>SNS 로그인을 시도합니다.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>서드파티 인증 페이지로 이동</strong>하여 정상 인증이 완료되면 해당 계정으로 로그인합니다.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="authn-login-api_http_request">HTTP request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /aar/authn/login/kakao HTTP/1.1
Accept: application/json
Host: api.archiveofongr.site</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authn-login-api_path_parameters">Path parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. /aar/authn/login/{provider}</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">로그인을 시도할 서드파티 인증 기관명입니다.<br>
[kakao, naver, google, apple]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="authn-login-api_http_response">HTTP response</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 302 Found
Location: https://archiveofongr.site/login/auth?name=%EB%82%A8%EC%83%81%EC%97%BD&amp;accessToken=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJhYXItYmFja2VuZCIsInN1YiI6IuuCqOyDgeyXvSIsInJvbGUiOiJURU1QX1VTRVIiLCJzbnNJZCI6IjM4NTk0NzYwMjkiLCJleHAiOjE3MzU3MjI4MjIsInVzZXJJZCI6LTF9.aLJFkMUsfRhFxEWiWdJV0D0gytj1NrZYkw9UIAfDjcQ&amp;provider=kakao&amp;isFirstLogin=false</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authn-login-api_response_headers">Response headers</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Location</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">로그인 이후 이동하는 경로와 쿼리 파라미터입니다.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph">
<p><code>파라미터에 대한 세부 정보는 아래 <strong>Response fields</strong>를 참고바랍니다.</code></p>
</div>
<div class="sect3">
<h4 id="authn-login-api_response_fields">Response fields</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nickname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">로그인한 사용자의 이름입니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>accessToken</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">로그인한 사용자의 JWT 액세스 토큰입니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>provider</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">로그인을 제공한 서드파티 인증 기관명입니다.<br>
[kakao, naver, google, apple]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isFirstLogin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">해당 사용자가 처음 로그인했는지 여부입니다.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="authn-regist-api">회원가입 API</h3>
<div class="paragraph">
<p>회원가입을 시도합니다.</p>
</div>
<div class="sect3">
<h4 id="authn-regist-api_http_request">HTTP request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /aar/authn/regist HTTP/1.1
Content-Type: application/json;charset=UTF-8
Content-Length: 60
Host: localhost:8080

{"recordAgreement":true,"personalInformationAgreement":true}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authn-regist-api_request_fields">Request fields</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recordAgreement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">녹화물에 대한 2차 가공 동의여부입니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>personalInformationAgreement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">사용자 개인정보 수집 및 활용에 대한 동의여부입니다.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="authn-regist-api_http_response">HTTP response</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: DENY
Content-Length: 191

{"nickname":"leaf","accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="authn-regist-api_response_fields">Response fields</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nickname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">회원가입한 사용자의 닉네임입니다.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>accessToken</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">회원가입한 사용자의 JWT 액세스 토큰입니다.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.0.1-SNAPSHOT<br>
Last updated 2025-01-02 10:02:38 +0900
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>